<html> 
    <body>
        
        <canvas id="paper" width="600" height="500"></canvas>
        <script> 
        
        window.onload = function () {
            iniciar();

            setInterval(principal, 100 / 30 );
        }

        function iniciar () {
            // Objetos
             folhaDesenho = document.getElementById("paper");
             areaDesenho = folhaDesenho.getContext("2d");
            //Variáveis
             larguraCampo = 600;
             alturaCampo = 500;
             espessuraRaquete = 5;
             alturaRaque = 60;
             diametroDaBola = 10;

             efeitoRaquete = 0.3;
             velocidadeJogador2 = 5;
    
             posicaoDaBolaX = posicaoDaBolaY = 10;
             velocidadeBolaPosicaoX = velocidadeBolaPosicaoY = 4;
             posicaoJogador1 = posicaoJogador2 = 40;
             pontuacaoJogador1 = pontuacaoJogador2 = 0;
       

            folhaDesenho.addEventListener('mousemove', function (e){
            posicaoJogador1 = e.clientY - alturaRaque /2;
            });
        }   
        function principal () {
            Desenhar ();
            calcular ();
        }
        function Desenhar () {
            //Campo 
            areaDesenho.fillStyle = "#286047";
            areaDesenho.fillRect(0,0,larguraCampo,alturaCampo);
    
            //Linha Central
            areaDesenho.fillStyle="#ffffff";
            areaDesenho.fillRect(larguraCampo/2 - espessuraRaquete/2,0,espessuraRaquete,alturaCampo);
    
            // Cor Raquete e Bolinha
            areaDesenho.fillStyle="black";
            // Raquetes 1 e 2
            areaDesenho.fillRect(0,posicaoJogador1,espessuraRaquete,alturaRaque);
            areaDesenho.fillRect(larguraCampo-espessuraRaquete,posicaoJogador2,espessuraRaquete,alturaRaque);
            // Bolinha Quadrada
            areaDesenho.fillRect(posicaoDaBolaX - diametroDaBola,posicaoDaBolaY -diametroDaBola,diametroDaBola/2,diametroDaBola/2);
            // Escrever Pontuação dos Jogadores 
            areaDesenho.fillText("Bruno -" + pontuacaoJogador1 + " pontos", 100 , 100 );
            areaDesenho.fillText("Torres -" + pontuacaoJogador2 + " pontos", larguraCampo - 200 , 100 );
        }
        function calcular () {
            posicaoDaBolaX = posicaoDaBolaX + velocidadeBolaPosicaoX;
            posicaoDaBolaY = posicaoDaBolaY + velocidadeBolaPosicaoY;
    
            //Verifica Lateral Superior
            if (posicaoDaBolaY < 0 && velocidadeBolaPosicaoY < 0) {
                velocidadeBolaPosicaoY = -velocidadeBolaPosicaoY;
            }
            // Verifica Lateral Inferior
            if (posicaoDaBolaY > alturaCampo && velocidadeBolaPosicaoY >0) {
                velocidadeBolaPosicaoY = -velocidadeBolaPosicaoY;
            }
            //Verifica se o Jogador 2 fez 1 ponto
            if (posicaoDaBolaX < 0) {
                if (posicaoDaBolaY > posicaoJogador1 && posicaoDaBolaY < posicaoJogador1 + alturaRaque){
                    velocidadeBolaPosicaoX = -velocidadeBolaPosicaoX;
                    diferencaY = posicaoDaBolaY - (posicaoJogador1 +alturaRaque / 2); 
                    velocidadeBolaPosicaoY = diferencaY * efeitoRaquete;
                } else {
                    // Pontos Jogador 2
                    pontuacaoJogador2++; 
                    // Resetar Bola
                    continuar ();
                }
            }
            //Verifica se o Jogador 1 fez ponto
            if (posicaoDaBolaX > larguraCampo){
                if (posicaoDaBolaY > posicaoJogador2 && posicaoDaBolaY < posicaoJogador2 + alturaRaque){
                    velocidadeBolaPosicaoX = -velocidadeBolaPosicaoX;
                    diferencaY = posicaoDaBolaY - (posicaoJogador2 + alturaRaque / 2); 
                    velocidadeBolaPosicaoY = diferencaY * efeitoRaquete;
                }else {
                    // Pontos Jogador 2
                    pontuacaoJogador1++; 
                    // Resetar Bola
                    continuar ();

                }
            }  
            if ( posicaoJogador2 + alturaRaque / 2 < posicaoDaBolaY) {
                posicaoJogador2 = posicaoJogador2 + velocidadeJogador2;
            } else {
                posicaoJogador2 = posicaoJogador2 - velocidadeJogador2;
            }
        }
        function continuar () {
            posicaoDaBolaX= larguraCampo / 2;
            posicaoDaBolaY= alturaCampo / 2;
            velocidadeBolaPosicaoX = -velocidadeBolaPosicaoX;
            velocidadeBolaPosicaoY = 3;
        }
        </script>
    </body>
</html>
            
            
            
    
    
            
    
    
            
           

        
                   
    
    
            
                  
                    
    
           
    


            

        
            
            
            
            

           

                
            
                
           
    